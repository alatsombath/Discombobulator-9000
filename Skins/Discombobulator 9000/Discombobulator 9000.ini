[Metadata]
Name=Discombobulator 9000
Author=alatsombath
Version=01 April 2015
License=Creative Commons Attribution-Non-Commercial-Share Alike 3.0
Information=A music visualizer for Rainmeter

[Rainmeter]
Update=16

OnCloseAction=["https://www.youtube.com/watch?v=dQw4w9WgXcQ"]

ContextTitle="Edit variables"
ContextAction=["#@#Variables.inc"]

@Include=#@#Variables.inc

[MeasureAudio]
Measure=Plugin
Plugin=AudioLevel
Port=Output
FFTSize=#FFTSize#
FFTOverlap=(#FFTSize#/2)
FFTAttack=#FFTAttack#
FFTDecay=#FFTDecay#
Bands=#Bands#
FreqMin=#FreqMin#
FreqMax=#FreqMax#
Sensitivity=#Sensitivity#

; Roundline is always full when measure value is 1
[FullRoundline]
Measure=Calc
Formula=1
UpdateDivider=-1

[MeterRoundline]
MeasureName=FullRoundline
W=((#CenterOffset#+(#RoundlineLength#*#Bands#)+(#RoundlineGap#*(#Bands#-1)))*2)
H=((#CenterOffset#+(#RoundlineLength#*#Bands#)+(#RoundlineGap#*(#Bands#-1)))*2)
AntiAlias=1
Solid=1
DynamicVariables=1

[Invert]
Measure=Calc
IfCondition=(#InvertSpectrum# = 1)
IfTrueAction=[!SetOption Invert Formula #Bands#][!UpdateMeasure Invert]
IfFalseAction=[!SetOption Invert Formula 0][!UpdateMeasure Invert]
UpdateDivider=-1

; Remove this section when modifying individual meters in WriteBands.inc
[ScriptRepeatBands]
Measure=Script
ScriptFile=#@#RepeatSection.lua
ReadFile=#@#ReadBands.inc
WriteFile=#@#WriteBands.inc
Sub=Repeat
Index=1
Limit=(#Bands#-1)
@Include=#@#WriteBands.inc

[ScriptColorChanger]
Measure=Script
ScriptFile=#@#ColorChanger.lua
Sub=Repeat
Index=1
Limit=(#Bands#-1)
Threshold=0
MeasureName=MeasureAudioRepeat
MeterName=MeterRoundlineRepeat
OptionName=LineColor

[MeasureNowPlaying]
Measure=Plugin
Plugin=NowPlaying
PlayerName=#PlayerName#
PlayerType=POSITION

[MeasureArtist]
Measure=Plugin
Plugin=NowPlaying
PlayerName=[MeasureNowPlaying]
PlayerType=ARTIST

[MeasureAlbum]
Measure=Plugin
Plugin=NowPlaying
PlayerName=[MeasureNowPlaying]
PlayerType=ALBUM

[MeasureTrack]
Measure=Plugin
Plugin=NowPlaying
PlayerName=[MeasureNowPlaying]
PlayerType=TITLE

; If you remove this section, Rainmeter will explode
[MeterDummy]
Meter=Bar
MeasureName=MeasureAudio
UpdateDivider=-1